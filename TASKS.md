# Задачи для Ambient Life

## Базовые скрипты и события
- [x] Определить константы событий EVT_SLOT_0..5 и EVT_RESYNC в общем include-файле.
- [x] Реализовать скрипт контроллера области (OnEnter/OnExit/AreaTick) с токеном тика и вычислением слота суток.
- [x] Реализовать скрипт обработки событий NPC (OnUserDefined) с идемпотентностью по последнему слоту.

## Реестр NPC
- [x] Реализовать регистрацию NPC при спавне и удаление при смерти (al_npc_onspawn / al_npc_ondeath).
- [x] Реализовать плотный массив реестра (n, n0..n99) с swap-remove.
- [x] Добавить обслуживание валидности реестра при обходах.

## Управление активностью NPC
- [x] Добавить hide/freeze при PC=0 и unhide/unfreeze при PC>0.
- [x] Опционально очищать очередь действий NPC при деактивации (ClearAllActions).

## Слоты суток и поведение
- [x] Реализовать вычисление слота суток (0–5) на основе GetTimeHour().
- [x] Добавить рассылку EVT_SLOT_x только при смене слота.
- [x] Подготовить место для таблицы поведения по слотам (маршруты/анимации/точки интереса).

## Производительность и проверка
- [x] Убедиться, что нет heartbeat на NPC и нет GetObjectByTag в критическом пути.
- [x] Добавить проверки: тик запускается только при PC>0 и корректно обрывается по токену.

## Документация
- [x] Задокументировать примеры использования toolset bindings (OnEnter/OnExit/OnUserDefined).
