# Задачи для Ambient Life

## Базовые скрипты и события
- [ ] Определить константы событий EVT_SLOT_0..5 и EVT_RESYNC в общем include-файле.
- [ ] Реализовать скрипт контроллера области (OnEnter/OnExit/AreaTick) с токеном тика и вычислением слота суток.
- [ ] Реализовать скрипт обработки событий NPC (OnUserDefined) с идемпотентностью по последнему слоту.

## Реестр NPC
- [ ] Реализовать регистрацию NPC при спавне и удаление при смерти (AL_NPC_OnSpawn / AL_NPC_OnDeath).
- [ ] Реализовать плотный массив реестра (n, n0..n99) с swap-remove.
- [ ] Добавить обслуживание валидности реестра при обходах.

## Управление активностью NPC
- [ ] Добавить hide/freeze при PC=0 и unhide/unfreeze при PC>0.
- [ ] Опционально очищать очередь действий NPC при деактивации (ClearAllActions).

## Слоты суток и поведение
- [ ] Реализовать вычисление слота суток (0–5) на основе GetTimeHour().
- [ ] Добавить рассылку EVT_SLOT_x только при смене слота.
- [ ] Подготовить место для таблицы поведения по слотам (маршруты/анимации/точки интереса).

## Производительность и проверка
- [ ] Убедиться, что нет heartbeat на NPC и нет GetObjectByTag в критическом пути.
- [ ] Добавить проверки: тик запускается только при PC>0 и корректно обрывается по токену.

## Документация
- [ ] Задокументировать примеры использования toolset bindings (OnEnter/OnExit/OnUserDefined).
